*** Settings ***
Test Setup        Run Keywords    Get Test Case ID From Test Case Name    AND    fsweb_Load Data From File    ${v_reshareDataFile}    ${v_testcaseID}    AND
...               Open Web App    AND    SignIn    ${v_data['Direct recipient email address']}    ${v_data['Password']}
Test Teardown     Run Keywords    fsweb_Submit Test Status Into Testlink    ${v_testcaseID}    AND    Close All Browsers
Resource          ../Resource/AddRecipients.txt
Library           ${CURDIR}/../Tool/Libs/DeleteUserInDatabase.py

*** Test Cases ***
fs[7541]_Only require collecting name when reshare a first file for account has no name
    fsweb_Open A File Or Folder    FileString Received Files
    Wait For Progress Bar
    fsweb_Open A File Or Folder    ${v_data['Owner fullname']}
    Wait For Progress Bar
    Right Click File    ${v_data['Filename']}
    Click    ${MenuWhenRightClickOnAFile_ReShare}
    Wait Until Element Is Visible    ${CollectName}    ${cfg_timeout}    Collect name popup doesn't exist
    Input    ${CollectName_FirstName}    Automation
    Input    ${CollectName_LastName}    Test
    Click    ${CollectName_SaveAndContinueButton}
    Wait For Progress Bar
    fsweb_Verify_Reshare Popup Should Exist
    Click    ${Reshare_CancelButton}
    fsweb_Verify_Reshare Popup Should Not Exist
    Right Click File    ${v_data['Filename']}
    Click    ${MenuWhenRightClickOnAFile_ReShare}
    ${v_isCollectNameExist}=    Run Keyword And Return Status    Wait Until Element Is Visible    ${CollectName}    5
    Run Keyword If    ${v_isCollectNameExist}==True    Fail    Collect Name model still appear after reshare second time
    [Teardown]    Run Keywords    fsweb_Submit Test Status Into Testlink    ${v_testcaseID}    AND    Close All Browsers    AND
    ...    Clear Firstname And Lastname    ${v_data['Direct recipient email address']}

fs[7543]_Name is collected successfully when entering valid characters and can resharing file after that
    fsweb_Open A File Or Folder    FileString Received Files
    Wait For Progress Bar
    fsweb_Open A File Or Folder    ${v_data['Owner fullname']}
    Wait For Progress Bar
    Right Click File    ${v_data['Filename']}
    Click    ${MenuWhenRightClickOnAFile_ReShare}
    Wait Until Element Is Visible    ${CollectName}    ${cfg_timeout}    Collect name popup doesn't exist
    Input    ${CollectName_FirstName}    Automation
    Input    ${CollectName_LastName}    Test
    Click    ${CollectName_SaveAndContinueButton}
    Wait For Progress Bar
    fsweb_Verify_Reshare Popup Should Exist
    [Teardown]    Run Keywords    fsweb_Submit Test Status Into Testlink    ${v_testcaseID}    AND    Close All Browsers    AND
    ...    Clear Firstname And Lastname    ${v_data['Direct recipient email address']}

fs[7562]_Does NOT require collecting name when resharing file if account has name
    fsweb_Open A File Or Folder    FileString Received Files
    Wait For Progress Bar
    fsweb_Open A File Or Folder    ${v_data['Owner fullname']}
    Wait For Progress Bar
    Right Click File    ${v_data['Filename']}
    Click    ${MenuWhenRightClickOnAFile_ReShare}
    Wait For Progress Bar
    fsweb_Verify_Reshare Popup Should Exist

fs[7566]_CANNOT resharing file if user cancel collecting name
    fsweb_Open A File Or Folder    FileString Received Files
    Wait For Progress Bar
    fsweb_Open A File Or Folder    ${v_data['Owner fullname']}
    Wait For Progress Bar
    Right Click File    ${v_data['Filename']}
    Click    ${MenuWhenRightClickOnAFile_ReShare}
    Wait Until Element Is Visible    ${CollectName}    ${cfg_timeout}    Collect name popup doesn't exist
    Click    ${CollectName_CancelButton}
    fsweb_Verify_Reshare Popup Should Not Exist

fs[7568]_CANNOT collect name successfully if user inputs invalid data for first name and last name
    fsweb_Open A File Or Folder    FileString Received Files
    Wait For Progress Bar
    fsweb_Open A File Or Folder    ${v_data['Owner fullname']}
    Wait For Progress Bar
    Right Click File    ${v_data['Filename']}
    Click    ${MenuWhenRightClickOnAFile_ReShare}
    Wait Until Element Is Visible    ${CollectName}    ${cfg_timeout}    Collect name popup doesn't exist
    Click    ${CollectName_SaveAndContinueButton}
    fsweb_Verify_Reshare Popup Should Not Exist
